@model NeuralPlay.Models.ComunidadViewModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = $"Miembros de {Model.Nombre}";
    var miembros = ViewBag.Miembros as List<NeuralPlay.Models.MiembroComunidadViewModel> ?? new List<NeuralPlay.Models.MiembroComunidadViewModel>();
    ViewBag.OcultarNavbar = true;
}

@Html.Partial("~/Views/Shared/_SidebarLeft.cshtml")
@Html.Partial("~/Views/Shared/_SidebarRight.cshtml")
@Html.Partial("~/Views/Shared/_SidebarDown.cshtml")

<style>
    /* Reset para etiquetas semánticas */
    figure, hgroup, footer, hr, fieldset {
        margin: 0;
        padding: 0;
    }

    fieldset {
        border: none;
        min-width: 0;
    }

    hr {
        border: none;
        height: 2px;
    }

    /* Sobrescribir display flex del layout para permitir flex row en esta página */
    body .content-container {
        display: block !important;
        align-items: unset !important;
    }

    /* Sobrescribir max-width del page-header para esta página */
    body .page-header {
        max-width: 100% !important;
    }

    /* Estilos específicos del botón volver */
    .btn-back {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: var(--np-red);
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        font-family: 'Lexend', sans-serif;
        font-size: 1rem;
        transition: background 0.3s, transform 0.3s;
        margin-bottom: 30px;
        border: none;
        cursor: pointer;
    }

    .btn-back:hover {
        background: #c4083c;
        transform: translateX(-5px);
    }

    .members-grid {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top: 30px;
    }

    .member-card {
        background: rgba(36, 36, 36, 0.95);
        border-radius: 10px;
        padding: 25px;
        display: flex;
        align-items: center;
        gap: 20px;
        transition: all 0.3s;
        border: 2px solid transparent;
    }

    .member-card:hover {
        border-color: var(--np-red);
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(229, 10, 70, 0.3);
    }

    .member-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 3px solid var(--np-red);
        flex-shrink: 0;
        overflow: hidden;
    }

    .member-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .member-avatar-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, var(--np-red) 0%, #ff4b7d 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Neue', sans-serif;
        font-size: 2rem;
        color: white;
    }

    .member-info {
        flex: 1;
    }

    .member-name {
        font-family: 'Neue', sans-serif;
        font-size: 1.5rem;
        color: white;
        margin: 0 0 5px 0;
        text-decoration: none;
        display: block;
        transition: color 0.3s;
    }

    .member-name:hover {
        color: var(--np-red);
    }

    .member-role {
        font-family: 'Lexend', sans-serif;
        font-size: 0.9rem;
        color: #aaa;
        margin: 0 0 5px 0;
    }

    .member-date {
        font-family: 'Lexend', sans-serif;
        font-size: 0.85rem;
        color: #666;
        margin: 0;
    }

    .no-members {
        text-align: center;
        padding: 60px 20px;
        color: #888;
        font-family: 'Lexend', sans-serif;
        font-size: 1.2rem;
    }
</style>

<!-- Contenedor principal - solo fondo -->
<div class="main-container"></div>

<!-- Contenedor de contenido - entre las barras laterales -->
<section class="content-container">
    <header class="page-header">
        <a asp-action="Details" asp-route-id="@Model.IdComunidad" class="btn-back">
            <i class="bi bi-arrow-left"></i>
            Volver a la comunidad
        </a>
        
        <h1 class="page-title">Miembros</h1>
        <p class="page-subtitle">@Model.Nombre</p>
    </header>

    @if (miembros.Any())
    {
        <section class="members-grid">
            @foreach (var miembro in miembros)
            {
                <article class="member-card">
                    <figure class="member-avatar">
                        @if (!string.IsNullOrEmpty(miembro.Avatar))
                        {
                            <img src="@miembro.Avatar" alt="@miembro.NombreUsuario" />
                        }
                        else
                        {
                            <div class="member-avatar-placeholder">
                                @miembro.NombreUsuario.Substring(0, 1).ToUpper()
                            </div>
                        }
                    </figure>
                    <div class="member-info">
                        <a href="#" class="member-name">@miembro.NombreUsuario</a>
                        <p class="member-role">@miembro.Rol</p>
                        <p class="member-date">Miembro desde @miembro.FechaAlta.ToString("dd/MM/yyyy")</p>
                    </div>
                </article>
            }
        </section>
    }
    else
    {
        <aside class="no-members">
            <p>Esta comunidad aún no tiene miembros.</p>
        </aside>
    }
</section>

